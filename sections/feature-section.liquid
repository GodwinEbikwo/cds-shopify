{% comment %}
  Feature Section
  This section displays a heading, subheading, and a grid of feature cards.
  Content is managed via section settings and blocks in the Theme Editor.
{% endcomment %}

{% style %}
.section-features {
  padding-top: {{ section.settings.padding | default: 100 }}px;
  padding-bottom: {{ section.settings.padding | default: 100 }}px;
}

.feature-section__heading {
  text-align: center;
  margin-bottom: 60px;
}

.feature-section__heading h2 {
  font-size: 42px;
  color: {{ section.settings.heading_color | default: '#ffffff' }};
  margin-bottom: 20px;
}

.feature-section__heading p {
  font-size: 18px;
  color: {{ section.settings.subheading_color | default: '#aaaaaa' }};
  max-width: 700px;
  margin: 0 auto;
}

.feature-section__grid {
  display: grid;
  grid-template-columns: repeat({{ section.settings.columns_desktop }}, 1fr);
  gap: {{ section.settings.grid_gap }}px;
}

.feature-card {
  background-color: {{ section.settings.card_bg_color | default: '#242424' }};
  border-radius: 15px;
  padding: 30px;
  text-align: center;
  transition: transform 0.3s ease-in-out;
}

.feature-card:hover {
  transform: translateY(-10px);
}

.feature-card__icon {
  width: 80px;
  height: 80px;
  margin: 0 auto 20px;
  background-color: {{ section.settings.icon_bg_color | default: 'rgba(0, 229, 255, 0.1)' }};
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 30px;
  color: {{ section.settings.icon_color | default: '#00e5ff' }};
}

.feature-card h3 {
  font-size: 24px;
  margin-bottom: 15px;
  color: {{ section.settings.card_heading_color | default: '#ffffff' }};
}

.feature-card p {
  color: {{ section.settings.card_text_color | default: '#aaaaaa' }};
  margin-bottom: 20px;
}

@media (max-width: 992px) {
  .feature-section__grid {
    grid-template-columns: repeat({{ section.settings.columns_tablet }}, 1fr);
  }
}

@media (max-width: 768px) {
  .feature-section__grid {
    grid-template-columns: repeat({{ section.settings.columns_mobile }}, 1fr);
    gap: {{ section.settings.grid_gap | divided_by: 2 }}px;
  }
  .feature-section__heading {
      margin-bottom: 40px;
  }
  .feature-section__heading h2 {
      font-size: 32px;
  }
  .feature-section__heading p {
      font-size: 16px;
  }
   .feature-card {
      padding: 20px;
   }
  .feature-card h3 {
      font-size: 20px;
  }
  .feature-card p {
      font-size: 15px;
  }
}
{% endstyle %}

<div class="section-features color-{{ section.settings.color_scheme }} gradient">
  <div class="page-width">
    <div class="feature-section__heading">
      {% if section.settings.heading != blank %}
        <h2>{{ section.settings.heading }}</h2>
      {% endif %}
      {% if section.settings.subheading != blank %}
        <p>{{ section.settings.subheading }}</p>
      {% endif %}
    </div>

    {% if section.blocks.size > 0 %}
      <div class="feature-section__grid">
        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'feature' %}
              <div class="feature-card" {{ block.shopify_attributes }}>
                {% if block.settings.icon != blank %}
                  <div class="feature-card__icon">{{ block.settings.icon }}</div>
                {% endif %}
                {% if block.settings.title != blank %}
                  <h3>{{ block.settings.title }}</h3>
                {% endif %}
                {% if block.settings.text != blank %}
                  <p>{{ block.settings.text }}</p>
                {% endif %}
                {% if block.settings.button_label != blank and block.settings.button_link != blank %}
                  <a href="{{ block.settings.button_link }}" class="secondary-button">
                    {{ block.settings.button_label }}
                  </a>
                {% endif %}
              </div>
          {% endcase %}
        {% endfor %}
      </div>
    {% else %}
      {% comment %} Placeholder content if no blocks are added in the editor {% endcomment %}
      <div class="feature-section__grid">
        {% for i in (1..section.settings.columns_desktop) %}
          <div class="feature-card">
            <div class="feature-card__icon">?</div>
            <h3>Feature Title {{ i }}</h3>
            <p>This is a placeholder feature description. Add your content in the Theme Editor.</p>
            <a href="#" class="secondary-button">Button</a>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Feature Section",
  "tag": "section",
  "class": "section-features",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Why Choose Us"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "We offer unique features that set us apart."
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "label": "Columns (Desktop)",
      "min": 1,
      "max": 4,
      "step": 1,
      "default": 3
    },
    {
      "type": "range",
      "id": "columns_tablet",
      "label": "Columns (Tablet)",
      "min": 1,
      "max": 3,
      "step": 1,
      "default": 2
    },
    {
      "type": "range",
      "id": "columns_mobile",
      "label": "Columns (Mobile)",
      "min": 1,
      "max": 1,
      "step": 1,
      "default": 1
    },
    {
      "type": "range",
      "id": "grid_gap",
      "label": "Grid Gap (px)",
      "min": 10,
      "max": 60,
      "step": 5,
      "default": 40
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "background-1"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Subheading color",
      "default": "#aaaaaa"
    },
    {
      "type": "color",
      "id": "card_bg_color",
      "label": "Card background color",
      "default": "#242424"
    },
    {
      "type": "color",
      "id": "card_heading_color",
      "label": "Card heading color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "card_text_color",
      "label": "Card text color",
      "default": "#aaaaaa"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon color",
      "default": "#00e5ff"
    },
    {
      "type": "color",
      "id": "icon_bg_color",
      "label": "Icon background color",
      "default": "rgba(0, 229, 255, 0.1)"
    },
    {
      "type": "range",
      "id": "padding",
      "label": "Section padding (px)",
      "min": 0,
      "max": 200,
      "step": 5,
      "default": 100
    }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature Card",
      "settings": [
        {
          "type": "text",
          "id": "icon",
          "label": "Icon (Emoji or Text)",
          "default": "âœ¨"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Feature Title"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Text",
          "default": "Describe the feature in a few sentences."
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button Label"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Feature Section",
      "category": "Text",
      "blocks": [
        {
          "type": "feature"
        },
        {
          "type": "feature"
        },
        {
          "type": "feature"
        }
      ]
    }
  ]
}
{% endschema %}
